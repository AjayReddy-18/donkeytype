@import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Dark Theme (default) - Inspired by Monkeytype's Serika Dark */
:root, .dark {
  --color-primary: #e2b714;
  --color-primary-hover: #d4a912;
  --color-accent: #e2b714;
  --color-accent-success: #7ec850;
  --color-accent-error: #ca4754;
  --color-accent-warning: #e2b714;
  --color-bg: #323437;
  --color-bg-secondary: #2c2e31;
  --color-bg-tertiary: #424548;
  --color-text: #d1d0c5;
  --color-text-secondary: #646669;
  --color-text-muted: #646669;
  --color-border: #4a4b4d;
}

/* Light Theme - Clean and bright */
.light {
  --color-primary: #ca4754;
  --color-primary-hover: #b73d49;
  --color-accent: #ca4754;
  --color-accent-success: #2e8b57;
  --color-accent-error: #dc3545;
  --color-accent-warning: #f5a623;
  --color-bg: #f5f5f5;
  --color-bg-secondary: #ffffff;
  --color-bg-tertiary: #e8e8e8;
  --color-text: #323437;
  --color-text-secondary: #646669;
  --color-text-muted: #999999;
  --color-border: #d1d1d1;
}

/* ============================================
   GLOBAL STYLES
   ============================================ */
html, body {
  margin: 0;
  padding: 0;
  /* Prevent horizontal scrollbar / grey line artifacts */
  overflow-x: hidden;
  width: 100%;
}

body {
  font-family: 'Roboto Mono', monospace;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
  font-feature-settings: "kern" 1;
  font-kerning: normal;
  background: var(--color-bg);
  color: var(--color-text);
  font-size: 16px;
  /* Hide any potential scrollbars causing grey lines */
  scrollbar-width: thin;
}

/* ============================================
   TYPING AREA - Parent container
   CRITICAL: Must hide ALL system carets and text cursors
   ============================================ */
.typing-area {
  position: relative;
  padding: 1rem 0;
  /* Hide I-beam cursor completely */
  cursor: default !important;
  /* Hide system caret */
  caret-color: transparent !important;
  outline: none !important;
  /* Prevent ALL text selection */
  -webkit-user-select: none !important;
  user-select: none !important;
  -moz-user-select: none !important;
  -ms-user-select: none !important;
  /* Prevent touch selection */
  -webkit-touch-callout: none !important;
}

/* ============================================
   TYPING CONTAINER - No system caret
   CRITICAL: Must hide ALL system carets
   ============================================ */
.typing-container {
  position: relative;
  width: 100%;
  /* Hide I-beam cursor completely */
  cursor: default !important;
  /* Hide system caret */
  caret-color: transparent !important;
  /* Prevent any focus rings or outlines */
  outline: none !important;
  /* Prevent ALL text selection during typing */
  -webkit-user-select: none !important;
  user-select: none !important;
  -moz-user-select: none !important;
  -ms-user-select: none !important;
  -webkit-touch-callout: none !important;
}

/* ============================================
   CUSTOM CURSOR - Smooth movement
   ============================================ */
.cursor-smooth {
  position: absolute;
  left: 0;
  top: 0;
  width: 3px;
  background-color: var(--color-primary);
  border-radius: 2px;
  pointer-events: none;
  opacity: 0;
  /* Smooth glide transition */
  transition: transform 0.12s cubic-bezier(0.25, 0.1, 0.25, 1.0);
  /* GPU acceleration */
  transform: translate3d(0, 0, 0);
  will-change: transform;
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
  transform-style: preserve-3d;
  z-index: 10;
}

/* Blinking animation - only when idle */
.typing-cursor {
  animation: cursor-blink 1s step-end infinite;
}

@keyframes cursor-blink {
  0%, 50% { opacity: 1; }
  51%, 100% { opacity: 0; }
}

/* ============================================
   TYPING TEXT - Word-based layout with windowing
   Shows only ~3 lines, text scrolls as user types
   ============================================ */
.typing-text {
  font-family: 'Roboto Mono', monospace;
  /* Increased font size for better readability */
  font-size: 1.75rem;
  font-weight: 400;
  /* Comfortable line height */
  line-height: 2.0;
  /* Slight letter spacing for clarity */
  letter-spacing: 0.05em;
  /* Text rendering optimizations */
  text-rendering: optimizeSpeed;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  /* FIX ISSUE 3: Prevent text selection */
  -webkit-user-select: none;
  user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  /* FIX ISSUE 3: Hide I-beam on text too */
  cursor: default;
  /* Layout containment for performance */
  contain: layout style;
  /* Clean text wrapping */
  word-wrap: break-word;
  overflow-wrap: break-word;
  /* WINDOWING: Constrain height to ~3 lines */
  max-height: calc(1.75rem * 2.0 * 3);
  overflow: hidden;
  /* Smooth transition when text shifts */
  transition: none;
}

/* ============================================
   WORD STYLING
   ============================================ */
.word {
  display: inline-block;
  /* Good spacing between words */
  margin-right: 0.6em;
  /* Keep words together */
  white-space: nowrap;
  /* Position relative for overflow chars */
  position: relative;
  /* Inherit font */
  font-size: inherit;
  /* FIX ISSUE 3: No I-beam on words */
  cursor: default;
}

.word-space {
  /* Invisible space - just for structure */
  display: none;
}

/* ============================================
   CHARACTER STATE CLASSES
   ============================================
   O(1) class toggle - no layout/paint, just color
*/
.char {
  /* No transitions - instant color change */
  transition: none;
  display: inline;
  /* Inherit font size from parent */
  font-size: inherit;
  font-family: inherit;
  /* FIX ISSUE 3: No I-beam cursor on chars */
  cursor: default;
}

.char.pending {
  color: var(--color-text-muted);
}

.char.correct {
  color: var(--color-text);
}

.char.incorrect {
  color: var(--color-accent-error);
}

/* Overflow characters (extra typed beyond word) */
.char.overflow {
  color: var(--color-accent-error);
  /* Slight visual distinction for overflow */
  opacity: 0.8;
}

.overflow-container {
  display: inline;
}

/* ============================================
   HIDE SYSTEM CARET GLOBALLY
   ============================================ */
/* Hide native caret in any focusable element */
[tabindex]:focus,
input:focus,
textarea:focus,
[contenteditable]:focus {
  caret-color: transparent;
  outline: none;
}

/* ============================================
   SELECTION STYLING
   ============================================ */
::selection {
  background: var(--color-primary);
  color: var(--color-bg);
}

/* ============================================
   SCROLLBAR STYLING - Minimal
   ============================================ */
/* Hide horizontal scrollbar completely */
::-webkit-scrollbar:horizontal {
  display: none;
  height: 0;
}

.dark ::-webkit-scrollbar {
  width: 6px;
}

.dark ::-webkit-scrollbar-track {
  background: transparent;
}

.dark ::-webkit-scrollbar-thumb {
  background: var(--color-text-muted);
  border-radius: 3px;
}

.light ::-webkit-scrollbar {
  width: 6px;
}

.light ::-webkit-scrollbar-track {
  background: transparent;
}

.light ::-webkit-scrollbar-thumb {
  background: var(--color-border);
  border-radius: 3px;
}

/* ============================================
   FOCUS STYLES - Clean
   ============================================ */
*:focus {
  outline: none;
}

*:focus-visible {
  outline: none;
}

/* ============================================
   INPUT STYLING
   ============================================ */
input::placeholder {
  color: var(--color-text-muted);
}

/* ============================================
   UTILITY CLASSES
   ============================================ */
.no-transition,
.no-transition * {
  transition: none !important;
}

/* Prevent any accidental borders or lines */
* {
  border-color: transparent;
}
